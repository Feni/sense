<html>
<head>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link rel="stylesheet" href="style.css"/>
</head>
<body>
    <header>
        <h1 class="Logo">Sense</h1>
    </header>
    <div id="app">
    <span class="Sidebar">
        <ul>
            <li v-for="fDef in functionDefinitions">{{ fDef.name }}</li>
        </ul>
        
    </span>
            
    <div class="MainContents">
        <span v-for="(instance, index) in instances">
            <function-instance v-bind:instance="instance" 
                               v-bind:on-edit="toggleInstanceEdit"></function-instance>
        </span>
        
        
        <div class="AddFunctionInstance Box">
            <select v-model="newFuncId">
                <option v-for="fOption in functionDefinitions" v-bind:value="fOption.id">
                    {{ fOption.name }}
                </option>
            </select>
            <div class="Button" v-on:click="showAddInstance">Add Step</div>
        </div>
    </div>
    </div>
    
    <script type="text/x-template" id="tmpl-function-instance">
        <div class='FuncInstance'>
            <div class="FuncInstance-wrapper">
            <div v-if="isEdit">
                <span class="FInstanceName-type">{{ fDef.name }}</span>
                <input class="FInstanceName-input" v-model='name'></input>
                <div v-for='param in fDef.parameters'>
                    <label class="FIParameter-label">{{ param.name }}</label><br>
                    <span v-if="param.type == 'number'">
                    <input type='number' v-model='args[param.name]'></input>
                    </span>
                    <span v-else>Unknown input type</span>
                </div>
                <div class="Button Button-save margin-top" v-on:click="saveEdit">
                    Save
                </div>
            </div>
            <div v-else v-on:click="toggleEdit">
                <span class="FInstanceName">
                    <span class="FInstanceName-label">{{ name }}</span>
                    <span class="FInstanceName-type">{{ fDef.name }}</span>
                </span>
                <span class="FInstanceOutput">
                    {{ output() }}
                </span>
            </div>
            </div>
        </div>
    </script>

    
    <script src="node_modules/vue/dist/vue.js"></script>
    <script src="js/app.js"></script>

</body>
</html>